<!DOCTYPE html>
<html lang="ko">
  
  {%- include head.html -%}

  <body>
    
    <div class="gtranslate_wrapper"></div>

    <main class="container" id="content-area">
      {{ content }}
    </main>

    <script>
      // 페이지 로드가 완료되면 스크립트 실행
      document.addEventListener('DOMContentLoaded', function() {
    
        // 콘텐츠를 표시할 영역
        const contentArea = document.getElementById('content-area');
    
        // 동적으로 콘텐츠를 불러오는 함수
        function loadContent(mdFile) {
          // fetch API를 사용해 마크다운 파일의 내용을 가져옴
          fetch(mdFile)
            .then(response => {
              if (!response.ok) {
                throw new Error('파일을 불러오는데 실패했습니다.');
              }
              return response.text();
            })
            .then(markdownText => {
              // Marked.js 라이브러리를 사용해 마크다운을 HTML로 변환
              // Jekyll Front Matter(---로 시작하는 부분) 제거
              const contentOnly = markdownText.replace(/---[\s\S]*?---/, '').trim();
              contentArea.innerHTML = marked.parse(contentOnly);
            })
            .catch(error => {
              console.error('콘텐츠 로딩 오류:', error);
              contentArea.innerHTML = '<p>콘텐츠를 불러오는 중 오류가 발생했습니다.</p>';
            });
        }
    
        // 이벤트 위임: 클릭 이벤트를 상위 요소에서 한 번만 처리
        document.body.addEventListener('click', function(e) {
          // 클릭된 요소가 메뉴 링크인지 확인
          if (e.target.matches('#menu-solutionservice, #menu-techvision, #menu-ceoinsight')) {
            e.preventDefault(); // 기본 링크 동작 방지
            
            let mdFile = '';
            if (e.target.id === 'menu-solutionservice') {
              mdFile = 'solutionservice.md';
            } else if (e.target.id === 'menu-techvision') {
              mdFile = 'techvision.md';
            } else if (e.target.id === 'menu-ceoinsight') {
              mdFile = 'ceoinsight.md';
            }
            loadContent(mdFile);
          }
        });
    
        // 페이지 최초 로딩 시 'index.md'의 내용을 기본으로 표시
        // Jekyll이 이미 '{{ content }}'에 index.md 내용을 렌더링하므로,
        // 별도로 solutionservice.md를 로드할 필요가 없습니다.
        // 만약 빈 페이지에서 시작해야 한다면 아래 코드의 주석을 해제합니다.
        // loadContent('solutionservice.md');
      });
    </script>

  </body>
</html>